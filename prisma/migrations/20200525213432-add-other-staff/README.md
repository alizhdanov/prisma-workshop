# Migration `20200525213432-add-other-staff`

This migration has been generated by Ali Zhdanov at 5/25/2020, 9:34:32 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "prisma-workshop"."Comment" (
"body" text  NOT NULL ,"createdAt" timestamp(3)  NOT NULL DEFAULT CURRENT_TIMESTAMP,"id" SERIAL,"postId" integer  NOT NULL ,
    PRIMARY KEY ("id"))

CREATE TABLE "prisma-workshop"."Tag" (
"id" SERIAL,
    PRIMARY KEY ("id"))

CREATE TABLE "prisma-workshop"."_PostToTag" (
"A" integer  NOT NULL ,"B" integer  NOT NULL )

CREATE UNIQUE INDEX "_PostToTag_AB_unique" ON "prisma-workshop"."_PostToTag"("A","B")

CREATE  INDEX "_PostToTag_B_index" ON "prisma-workshop"."_PostToTag"("B")

ALTER TABLE "prisma-workshop"."Comment" ADD FOREIGN KEY ("postId")REFERENCES "prisma-workshop"."Post"("id") ON DELETE CASCADE  ON UPDATE CASCADE

ALTER TABLE "prisma-workshop"."_PostToTag" ADD FOREIGN KEY ("A")REFERENCES "prisma-workshop"."Post"("id") ON DELETE CASCADE  ON UPDATE CASCADE

ALTER TABLE "prisma-workshop"."_PostToTag" ADD FOREIGN KEY ("B")REFERENCES "prisma-workshop"."Tag"("id") ON DELETE CASCADE  ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200525212648-add-relation..20200525213432-add-other-staff
--- datamodel.dml
+++ datamodel.dml
@@ -1,7 +1,7 @@
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url      = env("DATABASE_URL")
 }
 generator prisma_client {
   provider = "prisma-client-js"
@@ -15,12 +15,27 @@
   articles Post[]
 }
 model Post {
-  id        Int      @default(autoincrement()) @id
+  id        Int       @default(autoincrement()) @id
   title     String
   body      String
+  createdAt DateTime  @default(now())
+  updateAt  DateTime  @updatedAt
+  userId    Int
+  user      User      @relation(fields: [userId], references: [id])
+  comments  Comment[]
+  tags      Tag[]     @relation(references: [id])
+}
+
+model Comment {
+  id        Int      @default(autoincrement()) @id
+  body      String
   createdAt DateTime @default(now())
-  updateAt  DateTime @updatedAt
-  userId    Int
-  user      User     @relation(fields: [userId], references: [id])
+  postId    Int
+  article   Post     @relation(fields: [postId], references: [id])
+}
+
+model Tag {
+  id       Int    @default(autoincrement()) @id
+  articles Post[] @relation(references: [id])
 }
```


